<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.9.1"/>
<title>Mechanics of Defect Evolution Library: Getting Started</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Mechanics of Defect Evolution Library
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.9.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Getting Started </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="PI_chargedparticles_main"></a>
The source file (main.cpp)</h1>
<p>The source file is main.cpp. This file contains the following code: </p><div class="fragment"><div class="line"><span class="comment">/* This file is part of PIL, the Particle Interaction Library.</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> * Copyright (C) 2012 by Giacomo Po &lt;gpo@ucla.edu&gt;</span></div>
<div class="line"><span class="comment"> * Copyright (C) 2012 by Shao-Ching Huang &lt;sch@ucla.edu&gt;</span></div>
<div class="line"><span class="comment"> * Copyright (C) 2012 by Tajendra Singh &lt;tvsingh@ucla.edu&gt;</span></div>
<div class="line"><span class="comment"> * Copyright (C) 2012 by Tamer Crosby &lt;tcrosby@ucla.edu&gt;</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> * PIL is distributed without any warranty under the</span></div>
<div class="line"><span class="comment"> * GNU General Public License (GPL) v2 &lt;http://www.gnu.org/licenses/&gt;.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="_terminal_colors_8h.html">model/Utilities/TerminalColors.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="_sequential_output_file_8h.html">model/Utilities/SequentialOutputFile.h</a>&gt;</span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="_charged_particle_8h.html">tutorials/ParticleInteraction/ChargedParticles/ChargedParticle.h</a>&gt;</span> <span class="comment">// a user-defined type of particle to be inserted in ParticleSystem</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="_particle_system_8h.html">model/ParticleInteraction/ParticleSystem.h</a>&gt;</span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="_m_p_icout_8h.html">model/MPI/MPIcout.h</a>&gt;</span></div>
<div class="line"></div>
<div class="line"><span class="comment">//#include &lt;tutorials/ParticleInteraction/ChargedParticles/CoulombEnergy.h&gt; // a user-defined type of energy interaction between ChargedParticle objects</span></div>
<div class="line"></div>
<div class="line"></div>
<div class="line"></div>
<div class="line"><span class="keyword">using namespace </span><a class="code" href="namespacemodel.html">model</a>;</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">int</span> <a class="code" href="bench_2bary_search_2main_8cpp.html#a0ddf1224851353fc92bfbff6f499fa97">main</a> (<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> * argv[]) {</div>
<div class="line"></div>
<div class="line">    <span class="comment">// 0- define the type of ParticleSystem specifying the type of particles</span></div>
<div class="line">    <span class="keyword">enum</span>{<a class="code" href="plot_search_8m.html#a382f3ca768b275b8d563604f7fc7df73">dim</a>=3}; <span class="comment">// We work in three dimensions</span></div>
<div class="line">    <span class="keyword">typedef</span> <a class="code" href="classmodel_1_1_charged_particle.html">ChargedParticle&lt;dim&gt;</a> ChargedParticleType; <span class="comment">// the type of particle</span></div>
<div class="line">    <span class="keyword">typedef</span> <a class="code" href="structmodel_1_1_particle_system.html">ParticleSystem&lt;ChargedParticleType&gt;</a> ChargedParticleSystem;</div>
<div class="line">    </div>
<div class="line">    <span class="comment">// 1- create a particleSystem of ChargedParticle(s)</span></div>
<div class="line">    ChargedParticleSystem particleSystem(argc,argv); <span class="comment">// initialized constructor: for both serial and parallel</span></div>
<div class="line">    <span class="comment">//ChargedParticleSystem particleSystem; // uninitialized constructor: for both serial and parallel</span></div>
<div class="line">    <span class="comment">//ChargedParticleSystem::initMPI(argc,argv); // if uninitialized constructor is used, call initMPI (parallel only)</span></div>
<div class="line">    </div>
<div class="line">    <span class="keywordtype">double</span> <a class="code" href="plot_cells_8m.html#a69ef6f92e84899a302cbb70deb5ed84a">cellSize</a>=1.0;</div>
<div class="line">    particleSystem.setCellSize(cellSize);</div>
<div class="line">    </div>
<div class="line">    <span class="comment">// 2- add some ChargedParticle(s) to the particleSystem with random position</span></div>
<div class="line">    <span class="comment">//    in [-10,10] and charge=1.0</span></div>
<div class="line">    <a class="code" href="namespacemodel.html#a0ce25fef078a7d9d9cb7cfbabcfbc289">model::cout</a>&lt;&lt;<span class="stringliteral">&quot;Creating particles...&quot;</span>&lt;&lt;std::endl;</div>
<div class="line">    <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="classmodel_1_1_charged_particle.html#a31a77e0315958d087309087da65b422d">ChargedParticle&lt;dim&gt;::VectorDimD</a> VectorDimD; <span class="comment">// helper</span></div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="bench_2bench___mesh_regions_2mesh_2generate_p_o_l_ycube_8m.html#a1c73327b2882639bc9f5e416bb3cc7ac">k</a>=0;<a class="code" href="bench_2bench___mesh_regions_2mesh_2generate_p_o_l_ycube_8m.html#a1c73327b2882639bc9f5e416bb3cc7ac">k</a>&lt;500000;++<a class="code" href="bench_2bench___mesh_regions_2mesh_2generate_p_o_l_ycube_8m.html#a1c73327b2882639bc9f5e416bb3cc7ac">k</a>)</div>
<div class="line">    {</div>
<div class="line">        <span class="keyword">const</span> VectorDimD <a class="code" href="3d_2plot_search_8m.html#a2de865ad6dc88c711fbee00e74ed3043">P</a>(VectorDimD::Random()*10.0*cellSize); <span class="comment">// PositionType::Random() returns values in [-1, 1]</span></div>
<div class="line">        <span class="keyword">const</span> VectorDimD <a class="code" href="3d_2plot_search_8m.html#ac0055fa4cdc19a2690bfee3643413a7d">V</a>(VectorDimD::Random()*0.0);</div>
<div class="line">        <span class="keyword">const</span> <span class="keywordtype">double</span> q(1.0);</div>
<div class="line">        particleSystem.addParticle(<a class="code" href="3d_2plot_search_8m.html#a2de865ad6dc88c711fbee00e74ed3043">P</a>,<a class="code" href="3d_2plot_search_8m.html#ac0055fa4cdc19a2690bfee3643413a7d">V</a>,q);</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Add a more particles</span></div>
<div class="line"><span class="comment">//    for (int k=0;k&lt;500;++k)</span></div>
<div class="line"><span class="comment">//    {</span></div>
<div class="line"><span class="comment"></span><span class="comment">//                particleSystem.addParticle(PositionType::Random()*10.0, 1.0); // uniform</span></div>
<div class="line"><span class="comment">//    }</span></div>
<div class="line">    </div>
<div class="line">    </div>
<div class="line">    <a class="code" href="namespacemodel.html#a0ce25fef078a7d9d9cb7cfbabcfbc289">model::cout</a>&lt;&lt;<span class="stringliteral">&quot;There are &quot;</span>&lt;&lt;particleSystem.particles().size()</div>
<div class="line">    &lt;&lt;<span class="stringliteral">&quot; particles occupying &quot;</span>&lt;&lt;particleSystem.cells().size()&lt;&lt;<span class="stringliteral">&quot; cells.&quot;</span>&lt;&lt;std::endl;</div>
<div class="line">    </div>
<div class="line">    <span class="comment">// -3.2a compute all binary CoulombForce interactions</span></div>
<div class="line">    <a class="code" href="namespacemodel.html#a0ce25fef078a7d9d9cb7cfbabcfbc289">model::cout</a>&lt;&lt;<span class="stringliteral">&quot;Computing electric field (nearest-neighbor)...&quot;</span>&lt;&lt;std::endl;</div>
<div class="line">    <span class="keyword">typedef</span> <span class="keyword">typename</span> ChargedParticleType::Efield Efield;</div>
<div class="line">    particleSystem.computeNeighborField&lt;Efield&gt;();</div>
<div class="line"></div>
<div class="line">    <a class="code" href="namespacemodel.html#a0ce25fef078a7d9d9cb7cfbabcfbc289">model::cout</a>&lt;&lt;<span class="stringliteral">&quot;Computing magnetic field (nearest-neighbor)...&quot;</span>&lt;&lt;std::endl;</div>
<div class="line">    <span class="keyword">typedef</span> <span class="keyword">typename</span> ChargedParticleType::Bfield Bfield;</div>
<div class="line">    particleSystem.computeNeighborField&lt;Bfield&gt;();</div>
<div class="line"></div>
<div class="line">    </div>
<div class="line">    <span class="comment">// -4 output</span></div>
<div class="line">    <a class="code" href="namespacemodel.html#a0ce25fef078a7d9d9cb7cfbabcfbc289">model::cout</a>&lt;&lt;<span class="stringliteral">&quot;Writing output file P/P_0.txt...&quot;</span>&lt;&lt;std::endl;</div>
<div class="line">    <a class="code" href="classmodel_1_1_sequential_output_file.html">SequentialOutputFile&lt;'P',true&gt;</a> pFile1;</div>
<div class="line">    pFile1&lt;&lt;particleSystem&lt;&lt;std::endl;</div>
<div class="line"></div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"></div>
</div><!-- fragment --><h1><a class="anchor" id="FRsource_makefile"></a>
Compiling: the Makefile</h1>
<pre class="fragment">cd &lt;MODELDIR&gt;/tutorials/ParticleInteraction/ChargedParticles
</pre><p>The same Makefile can now be used to compile both the serial version and the parallel version (MPI) of the code. The serial version can be compiled executing the following command in your terminal: </p><pre class="fragment">make serial
</pre><p> This compiles the source code into the executable <b>CPserial</b>.</p>
<p>Similarly, The parallel version (MPI) of the code can be compiled using: </p><pre class="fragment">make parallel 
</pre><p> This creates the executable <b>CPparallel</b>. Compiling the parallel version requires that both <a class="el" href="openmpi.html">open-MPI</a> and <a class="el" href="metis.html">METIS</a> are correctly installed in your system.</p>
<h1><a class="anchor" id="FRsource_run"></a>
Running DDserial and DDparallel</h1>
<p>The serial version of the code can be run executing: </p><pre class="fragment">./CPserial
</pre><p>On the other hand, the parallel version of the code can be run executing: </p><pre class="fragment">mpirun -np N v
</pre><p> where <b>N</b> is the number of processors to be used.</p>
<div class="image">
<img src="cells_50k.jpg" alt="cells_50k.jpg"/>
</div>
  </div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Aug 3 2015 17:40:55 for Mechanics of Defect Evolution Library by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.9.1
</small></address>
</body>
</html>
